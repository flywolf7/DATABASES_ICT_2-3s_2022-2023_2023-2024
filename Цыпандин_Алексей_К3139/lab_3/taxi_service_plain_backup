--
-- PostgreSQL database dump
--

-- Dumped from database version 15.1 (Debian 15.1-1.pgdg110+1)
-- Dumped by pg_dump version 16.0

-- Started on 2023-12-08 01:48:35 MSK

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 16393)
-- Name: taxi; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA taxi;


ALTER SCHEMA taxi OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 224 (class 1259 OID 16436)
-- Name: car_model; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.car_model (
    id bigint NOT NULL,
    brand character varying NOT NULL,
    model character varying NOT NULL,
    cost bigint NOT NULL,
    country character varying NOT NULL,
    tariff_id bigint
);


ALTER TABLE taxi.car_model OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16435)
-- Name: car_model_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.car_model_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.car_model_id_seq OWNER TO postgres;

--
-- TOC entry 3415 (class 0 OID 0)
-- Dependencies: 223
-- Name: car_model_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.car_model_id_seq OWNED BY taxi.car_model.id;


--
-- TOC entry 226 (class 1259 OID 16443)
-- Name: cars; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.cars (
    id bigint NOT NULL,
    specifications character varying NOT NULL,
    maintenance_date date NOT NULL,
    license_plate character(7) NOT NULL,
    mileage bigint NOT NULL,
    manufacture_year date NOT NULL,
    car_model_id bigint NOT NULL,
    employee_id bigint NOT NULL
);


ALTER TABLE taxi.cars OWNER TO postgres;

--
-- TOC entry 3416 (class 0 OID 0)
-- Dependencies: 226
-- Name: COLUMN cars.mileage; Type: COMMENT; Schema: taxi; Owner: postgres
--

COMMENT ON COLUMN taxi.cars.mileage IS 'km';


--
-- TOC entry 225 (class 1259 OID 16442)
-- Name: cars_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.cars_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.cars_id_seq OWNER TO postgres;

--
-- TOC entry 3417 (class 0 OID 0)
-- Dependencies: 225
-- Name: cars_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.cars_id_seq OWNED BY taxi.cars.id;


--
-- TOC entry 216 (class 1259 OID 16398)
-- Name: client; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.client (
    id bigint NOT NULL,
    firstname character varying(127) NOT NULL,
    surname character varying(127) NOT NULL,
    patronymic character varying(127),
    phone_number character(11) NOT NULL
);


ALTER TABLE taxi.client OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 16397)
-- Name: client_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.client_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.client_id_seq OWNER TO postgres;

--
-- TOC entry 3418 (class 0 OID 0)
-- Dependencies: 215
-- Name: client_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.client_id_seq OWNED BY taxi.client.id;


--
-- TOC entry 222 (class 1259 OID 16427)
-- Name: employee; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.employee (
    id bigint NOT NULL,
    adress character varying NOT NULL,
    firstname character varying(127) NOT NULL,
    surname character varying(127) NOT NULL,
    patronymic character varying(127),
    passport_number character(10) NOT NULL,
    phone_number character(11) NOT NULL,
    position_id bigint NOT NULL,
    work_schedule_id bigint DEFAULT 1 NOT NULL
);


ALTER TABLE taxi.employee OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16426)
-- Name: employee_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.employee_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.employee_id_seq OWNER TO postgres;

--
-- TOC entry 3419 (class 0 OID 0)
-- Dependencies: 221
-- Name: employee_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.employee_id_seq OWNED BY taxi.employee.id;


--
-- TOC entry 232 (class 1259 OID 16530)
-- Name: orders; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.orders (
    id bigint NOT NULL,
    adress_from character varying NOT NULL,
    adress_to character varying NOT NULL,
    loading_time character varying NOT NULL,
    unloading_time character varying NOT NULL,
    payment_type character varying NOT NULL,
    employee_id bigint NOT NULL,
    client_id bigint NOT NULL,
    tariff_id bigint NOT NULL,
    work_schedule_id bigint NOT NULL
);


ALTER TABLE taxi.orders OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16529)
-- Name: orders_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.orders_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.orders_id_seq OWNER TO postgres;

--
-- TOC entry 3420 (class 0 OID 0)
-- Dependencies: 231
-- Name: orders_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.orders_id_seq OWNED BY taxi.orders.id;


--
-- TOC entry 218 (class 1259 OID 16405)
-- Name: payment_card; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.payment_card (
    id bigint NOT NULL,
    card_number character(16) NOT NULL,
    client_id bigint NOT NULL
);


ALTER TABLE taxi.payment_card OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16404)
-- Name: payment_card_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.payment_card_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.payment_card_id_seq OWNER TO postgres;

--
-- TOC entry 3421 (class 0 OID 0)
-- Dependencies: 217
-- Name: payment_card_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.payment_card_id_seq OWNED BY taxi.payment_card.id;


--
-- TOC entry 220 (class 1259 OID 16418)
-- Name: position; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi."position" (
    id bigint NOT NULL,
    name character varying NOT NULL
);


ALTER TABLE taxi."position" OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16417)
-- Name: position_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.position_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.position_id_seq OWNER TO postgres;

--
-- TOC entry 3422 (class 0 OID 0)
-- Dependencies: 219
-- Name: position_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.position_id_seq OWNED BY taxi."position".id;


--
-- TOC entry 228 (class 1259 OID 16479)
-- Name: tariff; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.tariff (
    id bigint NOT NULL,
    name character varying NOT NULL,
    base_cost bigint NOT NULL
);


ALTER TABLE taxi.tariff OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16478)
-- Name: tariff_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.tariff_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.tariff_id_seq OWNER TO postgres;

--
-- TOC entry 3423 (class 0 OID 0)
-- Dependencies: 227
-- Name: tariff_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.tariff_id_seq OWNED BY taxi.tariff.id;


--
-- TOC entry 230 (class 1259 OID 16511)
-- Name: work_schedule; Type: TABLE; Schema: taxi; Owner: postgres
--

CREATE TABLE taxi.work_schedule (
    id bigint NOT NULL,
    days_per_week character varying NOT NULL,
    time_of_day character varying NOT NULL,
    start_time time without time zone NOT NULL,
    end_time time without time zone NOT NULL
);


ALTER TABLE taxi.work_schedule OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16510)
-- Name: work_schedule_id_seq; Type: SEQUENCE; Schema: taxi; Owner: postgres
--

CREATE SEQUENCE taxi.work_schedule_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE taxi.work_schedule_id_seq OWNER TO postgres;

--
-- TOC entry 3424 (class 0 OID 0)
-- Dependencies: 229
-- Name: work_schedule_id_seq; Type: SEQUENCE OWNED BY; Schema: taxi; Owner: postgres
--

ALTER SEQUENCE taxi.work_schedule_id_seq OWNED BY taxi.work_schedule.id;


--
-- TOC entry 3222 (class 2604 OID 16439)
-- Name: car_model id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.car_model ALTER COLUMN id SET DEFAULT nextval('taxi.car_model_id_seq'::regclass);


--
-- TOC entry 3223 (class 2604 OID 16446)
-- Name: cars id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.cars ALTER COLUMN id SET DEFAULT nextval('taxi.cars_id_seq'::regclass);


--
-- TOC entry 3217 (class 2604 OID 16401)
-- Name: client id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.client ALTER COLUMN id SET DEFAULT nextval('taxi.client_id_seq'::regclass);


--
-- TOC entry 3220 (class 2604 OID 16430)
-- Name: employee id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.employee ALTER COLUMN id SET DEFAULT nextval('taxi.employee_id_seq'::regclass);


--
-- TOC entry 3226 (class 2604 OID 16533)
-- Name: orders id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.orders ALTER COLUMN id SET DEFAULT nextval('taxi.orders_id_seq'::regclass);


--
-- TOC entry 3218 (class 2604 OID 16408)
-- Name: payment_card id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.payment_card ALTER COLUMN id SET DEFAULT nextval('taxi.payment_card_id_seq'::regclass);


--
-- TOC entry 3219 (class 2604 OID 16421)
-- Name: position id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi."position" ALTER COLUMN id SET DEFAULT nextval('taxi.position_id_seq'::regclass);


--
-- TOC entry 3224 (class 2604 OID 16482)
-- Name: tariff id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.tariff ALTER COLUMN id SET DEFAULT nextval('taxi.tariff_id_seq'::regclass);


--
-- TOC entry 3225 (class 2604 OID 16514)
-- Name: work_schedule id; Type: DEFAULT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.work_schedule ALTER COLUMN id SET DEFAULT nextval('taxi.work_schedule_id_seq'::regclass);


--
-- TOC entry 3245 (class 2606 OID 16441)
-- Name: car_model car_model_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.car_model
    ADD CONSTRAINT car_model_pkey PRIMARY KEY (id);


--
-- TOC entry 3247 (class 2606 OID 16448)
-- Name: cars cars_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.cars
    ADD CONSTRAINT cars_pkey PRIMARY KEY (id);


--
-- TOC entry 3230 (class 2606 OID 16403)
-- Name: client client_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.client
    ADD CONSTRAINT client_pkey PRIMARY KEY (id);


--
-- TOC entry 3239 (class 2606 OID 16912)
-- Name: employee employee_passport_number_unique; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.employee
    ADD CONSTRAINT employee_passport_number_unique UNIQUE (passport_number);


--
-- TOC entry 3241 (class 2606 OID 16434)
-- Name: employee employee_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.employee
    ADD CONSTRAINT employee_pkey PRIMARY KEY (id);


--
-- TOC entry 3259 (class 2606 OID 16535)
-- Name: orders orders_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.orders
    ADD CONSTRAINT orders_pkey PRIMARY KEY (id);


--
-- TOC entry 3227 (class 2606 OID 16728)
-- Name: orders payment_type_check; Type: CHECK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE taxi.orders
    ADD CONSTRAINT payment_type_check CHECK (((payment_type)::bpchar = ANY (ARRAY['by_card'::bpchar, 'by_cash'::bpchar]))) NOT VALID;


--
-- TOC entry 3233 (class 2606 OID 16416)
-- Name: payment_card paymernt_card_card_number_unique; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.payment_card
    ADD CONSTRAINT paymernt_card_card_number_unique UNIQUE (card_number);


--
-- TOC entry 3243 (class 2606 OID 16914)
-- Name: employee phone_number_unique; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.employee
    ADD CONSTRAINT phone_number_unique UNIQUE (phone_number);


--
-- TOC entry 3235 (class 2606 OID 16916)
-- Name: position posigion_name_unique; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi."position"
    ADD CONSTRAINT posigion_name_unique UNIQUE (name);


--
-- TOC entry 3237 (class 2606 OID 16425)
-- Name: position position_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi."position"
    ADD CONSTRAINT position_pkey PRIMARY KEY (id);


--
-- TOC entry 3249 (class 2606 OID 16918)
-- Name: tariff tariff_name_unique; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.tariff
    ADD CONSTRAINT tariff_name_unique UNIQUE (name);


--
-- TOC entry 3251 (class 2606 OID 16484)
-- Name: tariff tariff_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.tariff
    ADD CONSTRAINT tariff_pkey PRIMARY KEY (id);


--
-- TOC entry 3228 (class 2606 OID 16717)
-- Name: orders unloading_after_loading_check; Type: CHECK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE taxi.orders
    ADD CONSTRAINT unloading_after_loading_check CHECK (((unloading_time)::bpchar > (loading_time)::bpchar)) NOT VALID;


--
-- TOC entry 3253 (class 2606 OID 16516)
-- Name: work_schedule work_schedule_pkey; Type: CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.work_schedule
    ADD CONSTRAINT work_schedule_pkey PRIMARY KEY (id);


--
-- TOC entry 3231 (class 1259 OID 16414)
-- Name: fki_client_id_fk; Type: INDEX; Schema: taxi; Owner: postgres
--

CREATE INDEX fki_client_id_fk ON taxi.payment_card USING btree (client_id);


--
-- TOC entry 3254 (class 1259 OID 16541)
-- Name: fki_e; Type: INDEX; Schema: taxi; Owner: postgres
--

CREATE INDEX fki_e ON taxi.orders USING btree (employee_id);


--
-- TOC entry 3255 (class 1259 OID 16547)
-- Name: fki_orders_client_id_fk; Type: INDEX; Schema: taxi; Owner: postgres
--

CREATE INDEX fki_orders_client_id_fk ON taxi.orders USING btree (client_id);


--
-- TOC entry 3256 (class 1259 OID 16553)
-- Name: fki_orders_tariff_id_fk; Type: INDEX; Schema: taxi; Owner: postgres
--

CREATE INDEX fki_orders_tariff_id_fk ON taxi.orders USING btree (tariff_id);


--
-- TOC entry 3257 (class 1259 OID 16559)
-- Name: fki_orders_work_schedule_id_fk; Type: INDEX; Schema: taxi; Owner: postgres
--

CREATE INDEX fki_orders_work_schedule_id_fk ON taxi.orders USING btree (work_schedule_id);


--
-- TOC entry 3262 (class 2606 OID 16768)
-- Name: cars cars_car_model_id; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.cars
    ADD CONSTRAINT cars_car_model_id FOREIGN KEY (car_model_id) REFERENCES taxi.car_model(id) NOT VALID;


--
-- TOC entry 3263 (class 2606 OID 16773)
-- Name: cars cars_employee_id; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.cars
    ADD CONSTRAINT cars_employee_id FOREIGN KEY (employee_id) REFERENCES taxi.employee(id) NOT VALID;


--
-- TOC entry 3261 (class 2606 OID 16473)
-- Name: employee employee_position_id; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.employee
    ADD CONSTRAINT employee_position_id FOREIGN KEY (position_id) REFERENCES taxi."position"(id) NOT VALID;


--
-- TOC entry 3264 (class 2606 OID 16542)
-- Name: orders orders_client_id_fk; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.orders
    ADD CONSTRAINT orders_client_id_fk FOREIGN KEY (client_id) REFERENCES taxi.client(id) NOT VALID;


--
-- TOC entry 3265 (class 2606 OID 16536)
-- Name: orders orders_employee_id_fk; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.orders
    ADD CONSTRAINT orders_employee_id_fk FOREIGN KEY (employee_id) REFERENCES taxi.employee(id) NOT VALID;


--
-- TOC entry 3266 (class 2606 OID 16548)
-- Name: orders orders_tariff_id_fk; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.orders
    ADD CONSTRAINT orders_tariff_id_fk FOREIGN KEY (tariff_id) REFERENCES taxi.tariff(id) NOT VALID;


--
-- TOC entry 3267 (class 2606 OID 16554)
-- Name: orders orders_work_schedule_id_fk; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.orders
    ADD CONSTRAINT orders_work_schedule_id_fk FOREIGN KEY (work_schedule_id) REFERENCES taxi.work_schedule(id) NOT VALID;


--
-- TOC entry 3260 (class 2606 OID 16409)
-- Name: payment_card payment_card_client_id_fk; Type: FK CONSTRAINT; Schema: taxi; Owner: postgres
--

ALTER TABLE ONLY taxi.payment_card
    ADD CONSTRAINT payment_card_client_id_fk FOREIGN KEY (client_id) REFERENCES taxi.client(id) NOT VALID;


-- Completed on 2023-12-08 01:48:36 MSK

--
-- PostgreSQL database dump complete
--

